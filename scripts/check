# !/bin/bash
r(){
	flag=1
	fapp="python app.py"
	PROCESS=`ps -ef|grep "$fapp"|grep -v grep|grep -v PPID|awk '{ print $2}'`
	for i in $PROCESS
	do
	  flag=0
	done

	DATE=$(date "+%G-%m-%d %H:%M:%S")

	if [[ flag -eq 1 ]]; then

	        echo "$DATE python app.py no work,start...." >> /tmp/finance_crond.log
	        cd '/data/app/finance'
	        python app.py &
	fi
}
while true
do
	r
	sleep 5m
	
done
	
