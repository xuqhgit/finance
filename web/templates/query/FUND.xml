<?xml version='1.0' encoding='UTF-8'?>
<!--
@(#)TEST.xml 16/1/18
@description:测试查询
@author apple 
-->
<query-config>
    <query id="SAVE_FUND" type="">
        <sql>
            <![CDATA[
                INSERT INTO fund(code,name,company_id,type,create_time)
                        values([code],[name],[company_id],[type],now())
            ]]>
        </sql>
    </query>
    <query id="SAVE_FUND_COMPANY" type="">
        <sql>
            <![CDATA[
            insert into `fund_company` ( `capacity`, `code`, `create_time`, `company_level`, `name`, `found_date`)
            values ( [capacity],[code], now(), [company_level], [name], [found_date])
            ]]>
        </sql>
    </query>

    <query id="GET_FUND_COMPANY" type="list">
        <sql>
            <![CDATA[
            select id,name,code from fund_company where status=1
            ]]>
        </sql>
    </query>
    <query id="GET_FUND" type="list">
        <sql>
            <![CDATA[
                select code from fund where state=1
                {% if code_list %}
                and code in ({% for c in code_list %}'{{ c.code }}'{% if not loop.last %},{% endif %}{% endfor %})
                {% endif %}
            ]]>
        </sql>
    </query>
    <query id="SAVE_FUND_STOCK">
        <sql>
            <![CDATA[
                insert into `finance`.`fund_stock` ( `stock_code`, `quantity`, `stock_name`, `fund_code`, `mc`, `create_time`, `end_date`, `scale`)
            values ( [stock_code], [quantity], [stock_name], [fund_code], [mc], now(), [end_date], [scale])
            ]]>
        </sql>
    </query>

    <query id="GET_FUND_STOCK" type="list">
        <sql>
            <![CDATA[
                select fund_code,stock_code,s.scale,s.quantity from fund_stock s where
                1=1
                {% if stock_code %}
                and s.stock_code=[stock_code]
                {% endif %}
                {% if end_date %}
                and s.end_date=[end_date]
                {% endif %}
                {% if fund_code %}
                and s.fund_code=[fund_code]
                {% endif %}
            ]]>
        </sql>
    </query>
</query-config>