<?xml version='1.0' encoding='UTF-8'?>
<!--
@description:stock event 事件
@author apple
@date 2018/1/9
-->
<query-config>
        <query id="INSERT_STOCK_EVENT">
        <sql>
            <![CDATA[
				INSERT INTO stock_event(
					stock_code,event_date,event_code,type,name,content,create_time
				)
				VALUES(
				    [ stock_code ] ,  [ event_date ] ,  [ event_code ] ,  [ type ] ,  [ name ] ,  [ content ] ,  now()
				)
            ]]>
        </sql>
    </query>
    <query id="GET_STOCK_DAILY_STOCK_FUTURE">
        <sql>
            <![CDATA[
				SELECT
                    date_format(e.event_date, '%Y%m%d') AS event_date,
                    e.content AS content,
                    e.name AS NAME,
                    e.type AS type,
                    e.event_code AS event_code,
                    e.id AS id,
                    e.stock_code AS stock_code
                FROM
                    stock_event e
                WHERE
                    e.event_date >=(SELECT
                        max(event_date) AS event_date
                    FROM
                        stock_event
                    WHERE
                        stock_code = [ stock_code ]
                    AND event_date < date_sub(curdate(), INTERVAL 1 DAY))
                AND e.stock_code = [ stock_code ] and e.status=1 order by e.event_date desc
            ]]>
        </sql>
    </query>

    <query id="DELETE_STOCK_EVENT">
        <sql>
            <![CDATA[
				delete from stock_event where id=[id]
            ]]>
        </sql>
    </query>

    <query id="UPDATE_DAILY_STOCK_DEL">
        <sql>
            <![CDATA[
				update stock_event set status=0 where id=[id]
            ]]>
        </sql>
    </query>
</query-config>